#!/usr/bin/env ruby
# encoding: UTF-8

require 'open-uri'
require 'json'

loc = '35.776705,-78.63915'
key = 'd281ddbbd3d67ec3cae2e6b4e90a04a7'
url = "https://api.forecast.io/forecast/#{key}/#{loc}"
json = open(URI.parse(url)).read
data = JSON.parse(json)['currently']
icons = {
  'clear-day' => '☀️ ',
  'clear-night' => '🌌 ',
  'partly-cloudy-night' => '🌌 ',
  'partly-cloudy-day' => '⛅️ ',
  'cloudy' => '☁️ ',
  'rain' => '☔️ ',
  'snow' => '❄️ ',
  'sleet' => '❄️ ',
  'hail' => '❄️ ',
  'wind' => '💨 ',
  'thunderstorm' => '⚡️ ',
  'fog' => '🌁 '
}
response = "#{icons[data['icon']]} #{data['temperature'].to_i}º"
puts response
