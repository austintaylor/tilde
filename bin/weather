#!/usr/bin/env ruby
# encoding: UTF-8

require 'open-uri'
require 'json'

loc = '35.776705,-78.63915'
key = 'd281ddbbd3d67ec3cae2e6b4e90a04a7'
url = "https://api.forecast.io/forecast/#{key}/#{loc}"
json = open(URI.parse(url)).read
data = JSON.parse(json)['currently']
icons = {
  'clear-day' => 'â˜€ï¸ ',
  'clear-night' => 'ğŸŒŒ ',
  'partly-cloudy-night' => 'ğŸŒŒ ',
  'partly-cloudy-day' => 'â›…ï¸ ',
  'cloudy' => 'â˜ï¸ ',
  'rain' => 'â˜”ï¸ ',
  'snow' => 'â„ï¸ ',
  'sleet' => 'â„ï¸ ',
  'hail' => 'â„ï¸ ',
  'wind' => 'ğŸ’¨ ',
  'thunderstorm' => 'âš¡ï¸ ',
  'fog' => 'ğŸŒ '
}
response = "#{icons[data['icon']]} #{data['temperature'].to_i}Âº"
puts response
